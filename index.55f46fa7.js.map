{"mappings":"stBAAA,IAAAA,EAAAC,EAAA,S,0BAKO,SAASC,IACaC,EAAAC,KAAKC,uBACbC,iBAAiB,QAASC,E,CAO/C,SAASA,EAAuBC,GAEpB,GADVC,QAAQC,IAAI,eACa,OAAtBC,aAAaC,KAId,OAFAC,EAAAb,GAASc,OAAOC,QAAQ,mEACxB,EAAAC,EAAAC,iBAEK,GAA8B,WAA1BT,EAAMU,OAAOC,SAAuB,CAEjC,MAANC,EAAwBZ,EAAMU,OAAOG,QAAQ,MAC7CC,EAAmB,CACrBC,GAAIH,EAAsBI,QAAQD,GAClCE,SAAUL,EAAsBM,iBAAiBC,SAAS,GAAGC,UAC7DC,MAAOT,EAAsBM,iBAAiBC,SAAS,GAAGC,UAC1DE,IAAKV,EAAsBM,iBAAiBC,SAAS,GAAGA,SAAS,GAAGI,WAAWC,IAAIC,UACnFC,YAAad,EAAsBM,iBAAiBC,SAAS,GAAGC,UAChEO,KAAMf,EAAsBM,iBAAiBC,SAAS,GAAGC,UACzDQ,KAAMhB,EAAsBM,iBAAiBC,SAAS,GAAGI,WAAW,GAAGM,MACvEC,UAAU,EACVC,QAAS,IASPC,EAAgC7B,aAAa2B,SAEnD,GAAGE,SAA2H,KAAlCA,GAAwCA,IAAkC,IAAMA,IAAkC,GAEpM7B,aAAK8B,QAAS,WAAYC,KAAKC,UAAUrB,IACjDd,EAAMU,OAAO0B,YAAc,2BACtB,CAEL,MAAMC,EAAsBH,KAAKI,MAAMnC,aAAaoC,QAAS,aAG7D,GAAGF,EAAoBtB,KAAOD,EAAiBC,GAC7CZ,aAAa2B,SAAW,GACxB9B,EAAMU,OAAO0B,YAAc,uBAI3B,GAAGI,MAAMC,QAAQJ,GAAsB,CACrC,MAAMK,EAASL,EAAoBM,WAAWC,GAC5CA,EAAK7B,KAAOD,EAAiBC,KAG3B,IAAc,IAAX2B,EAAe,CAChB,MAAMG,EAAMR,EACZQ,EAAIC,KAAKhC,GACTX,aAAa8B,QAAS,WAAYC,KAAKC,UAAUU,IAEjD7C,EAAMU,OAAO0B,YAAc,sB,KACtB,CACL,MAAMS,EAAMR,EACZQ,EAAIE,OAAOL,EAAQ,GACnBvC,aAAa8B,QAAS,WAAYC,KAAKC,UAAUU,IAEjD7C,EAAMU,OAAO0B,YAAc,iB,MAG5B,CAKL,MAAMY,EAAiB,CAACX,EAAqBvB,GAG7CX,aAAa8B,QAAS,WAAYC,KAAKC,UAAUa,G","sources":["src/js/addNewstoFavoriteLocalStorige.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport { refs } from './refs';\nimport { openAuthModal } from './modalOpening';\n\n\nexport function addNewsToFavoriteArrayInLocalStorage() {\n  const containerWithCards = refs.favouriteNewsContainer;\n  containerWithCards.addEventListener('click', addNewsToFavoriteArray);\n\n \n}\n\nlet newLocalStorage = [];\n \nfunction addNewsToFavoriteArray(event) {\n  console.log(\"клік працює\")\n  if(localStorage.auth === 'no') {\n    //console.log(\"не авторизовано\")\n    Notiflix.Notify.failure('Sorry, for using this opportunity you need to be signed in');\n    openAuthModal();\n    return;\n  } else if (event.target.nodeName === 'BUTTON') {\n    //console.log(\"авторизовано\")\n    const favoriteTargetElement = event.target.closest('li');\n    const newsTargetObject = {\n        id: favoriteTargetElement.dataset.id,\n        category: favoriteTargetElement.lastElementChild.children[5].innerText,\n        title: favoriteTargetElement.lastElementChild.children[2].innerText,\n        img: favoriteTargetElement.lastElementChild.children[1].children[1].attributes.src.nodeValue,\n        description: favoriteTargetElement.lastElementChild.children[3].innerText,\n        date: favoriteTargetElement.lastElementChild.children[4].innerText,\n        link: favoriteTargetElement.lastElementChild.children[6].attributes[0].value,\n        favorite: true,\n        wasRead: '',\n      };\n\n      \n\n\n\n\n\n    const favoriteArrayFromLocalStorage = localStorage.favorite;\n    \n    if(favoriteArrayFromLocalStorage === null || favoriteArrayFromLocalStorage === undefined || favoriteArrayFromLocalStorage === \"\" || favoriteArrayFromLocalStorage === [] || favoriteArrayFromLocalStorage === {}) {\n      //console.log(\"localStorage порожній\");\n      localStorage.setItem (\"favorite\", JSON.stringify(newsTargetObject));\n      event.target.textContent = 'Remove from favorite';\n    } else {\n      //console.log(\"localStorage не порожній\");\n      const filledFavoriteArray = JSON.parse(localStorage.getItem (\"favorite\"));\n      //console.log(filledFavoriteArray);\n      //console.log(typeof filledFavoriteArray);\n      if(filledFavoriteArray.id === newsTargetObject.id) {\n        localStorage.favorite = \"\";\n        event.target.textContent = 'Add to favorite';\n      } else {\n        //console.log(Array.isArray(filledFavoriteArray));\n\n        if(Array.isArray(filledFavoriteArray)) {\n          const newsId = filledFavoriteArray.findIndex((news) =>\n            news.id === newsTargetObject.id\n          );\n          //console.log(newsId);\n              if(newsId === -1) {\n                const box = filledFavoriteArray;\n                box.push(newsTargetObject);\n                localStorage.setItem (\"favorite\", JSON.stringify(box));\n                //console.log(filledFavoriteArray);\n                event.target.textContent = 'Remove from favorite';\n              } else {\n                const box = filledFavoriteArray;\n                box.splice(newsId, 1);\n                localStorage.setItem (\"favorite\", JSON.stringify(box));\n                //console.log(filledFavoriteArray);\n                event.target.textContent = 'Add to favorite';\n              };\n\n        } else {\n          //const box = [];\n          //console.log(typeof box);\n          //const arrayWith2news = box.push(filledFavoriteArray, newsTargetObject);\n          //console.log(arrayWith2news);\n          const arrayWith2news = [filledFavoriteArray, newsTargetObject];\n          //console.log(typeof arrayWith2news);\n          //console.log(arrayWith2news.length);\n          localStorage.setItem (\"favorite\", JSON.stringify(arrayWith2news));\n          //console.log(arrayWith2news);\n        }\n        /* const newsId = filledFavoriteArray.findIndex((news) => {\n          news.id === newsTargetObject.id;\n        });\n        console.log(newsId);\n        if(newsId === -1) {\n          filledFavoriteArray.push(newsTargetObject);\n        } else {\n          filledFavoriteArray.splice(3, 1);\n        } */\n      } \n    }\n  }\n}\n  \n\n"],"names":["$7Y9D8","parcelRequire","$84861ba3ac707bcb$export$1156cc8eff161242","$krGWQ","refs","favouriteNewsContainer","addEventListener","$84861ba3ac707bcb$var$addNewsToFavoriteArray","event","console","log","localStorage","auth","$parcel$interopDefault","Notify","failure","$jV1Ao","openAuthModal","target","nodeName","favoriteTargetElement","closest","newsTargetObject","id","dataset","category","lastElementChild","children","innerText","title","img","attributes","src","nodeValue","description","date","link","value","favorite","wasRead","favoriteArrayFromLocalStorage","setItem","JSON","stringify","textContent","filledFavoriteArray","parse","getItem","Array","isArray","newsId","findIndex","news","box","push","splice","arrayWith2news"],"version":3,"file":"index.55f46fa7.js.map"}